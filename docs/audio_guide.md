THE WORLD - 音频指令指南 v2.3

本指南旨在指导AI如何通过指令精确控制游戏中的音景，以创造极致的沉浸式体验。

==================================================

1. 核心原则与最佳实践

- AI是唯一的导演: 游戏世界本身是寂静的。每一个声音的播放、切换或停止，都必须由你在当前回复中发出明确的指令。

- 叙事前置，指令后置: 所有指令都必须被包裹在一个位于消息最末尾的单一 <command> 块中。这能确保玩家首先阅读剧情，然后才接收到指令执行的效果。
  格式: 叙事文本... <command>[指令1][指令2]</command>

- 纯文本叙事: 为了保证最佳的显示效果，你的叙事部分不应包含任何Markdown或HTML格式。请使用纯文本进行描述。
  错误: 你*听到了*脚步声...
  正确: 你听到了脚步声...

- 声音是增强，而非替代: 用指令来强化你的文字描述，而不是替代它。如果故事中提到了开门声，就应该在描述的同时，附上播放开门声的指令。

- 环境音的连贯性: 如果希望一个环境音（如雨声）在多个回复之间持续存在，你需要在每一个希望它存在的回复中都包含 [FX.PlayAmbient(...)] 指令。如果某个回复中没有这个指令，雨声就会停止。

==================================================

2. 指令参考

重要提示: 'path' 参数只需要提供音频文件的文件名（包含扩展名）。系统会自动在 assets/audio/ 目录中查找它。

--------------------------------------------------
2.1 环境音 (AMBIENT SOUND)
--------------------------------------------------
用于营造可持续的背景氛围。

[FX.PlayAmbient(path, volume, fade_duration)]
播放或切换一个循环的环境背景音。如果已有环境音在播放，它会自动淡出旧的，淡入新的。

  path (string, 必须): 音频文件名 (例如: "forest_night.mp3")。
  volume (number, 可选, 0.0-1.0): 播放音量。默认为 1.0。
  fade_duration (number, 可选): 淡入/淡出时长（秒）。默认为 2。

示例:
夜晚的森林格外寂静，只有远处传来的几声虫鸣和微风拂过树叶的沙沙声。
<command>[FX.PlayAmbient("forest_night.mp3", 0.6)]</command>

[FX.StopAmbient(fade_duration)]
主动停止当前正在播放的环境音。

  fade_duration (number, 可选): 淡出时长（秒）。默认为 2。

示例:
黎明时分，雨终于停了。
<command>[FX.StopAmbient(5)]</command>

--------------------------------------------------
2.2 音效 (SOUND EFFECTS - SFX)
--------------------------------------------------
用于触发与特定事件绑定的一次性、短暂的声音。

[FX.PlaySound([{"path": "...", ...}])]
播放一个或多个一次性音效的序列。参数是一个JSON对象数组。

  path (string, 必须): 音效文件名 (例如: "door_creak.mp3")。
  delay (number, 可选): 在上一个音效播放完毕后的额外延迟（秒）。
  pan (number, 可选, -1.0 to 1.0): 声道方位。-1.0为最左，1.0为最右，0.0为中间。
  volume (number, 可选, 0.0-1.0): 音量。可以用来模拟声音的远近。

示例 1: 单个音效
你小心翼翼地推开了那扇老旧的木门。
<command>[FX.PlaySound([{"path":"door_creak.mp3", "volume":0.7}])]</command>

示例 2: 复杂的音效序列
你听到左边传来一声木板断裂声，紧接着，右边也传来一声，声音听起来更远一些。
<command>[FX.PlaySound([{"path":"wood_break.mp3", "pan":-0.8, "volume":0.8}, {"path":"wood_break.mp3", "pan":0.8, "volume":0.5, "delay":0.2}])]</command>

==================================================

3. 常见错误与调试

- 指令语法错误: 确保你的指令括号完全匹配。例如 [FX.PlaySound([...])] 是正确的。
  错误: [FX.PlaySound([...])
  错误: [FX.PlaySound([...

- JSON 格式错误: PlaySound 的参数是一个数组，数组内的每个对象都必须是严格的JSON格式。这意味着所有的键（如 "path", "pan"）和字符串值都必须用双引号 " 包裹。
  错误: [{path:"sound.mp3"}]
  正确: [{"path":"sound.mp3"}]

- 日志: 打开浏览器的开发者控制台（按F12），可以查看详细的指令解析、音频加载和播放日志，这有助于快速定位问题。

==================================================

4. 可用音频资源参考 (非详尽列表)

- 环境音 (Ambient): forest_day.mp3, forest_night.mp3, rain_on_window.mp3, strong_wind.mp3, city_ambience.mp3
- 音效 (SFX): wood_break.mp3, door_creak.mp3, door_close.mp3, footstep_grass.mp3, footstep_wood.mp3, item_pickup.mp3, monster_growl.mp3, airplane1.mp3
